(this["webpackJsonpexpenses-splitter"]=this["webpackJsonpexpenses-splitter"]||[]).push([[0],[,,,function(e,t,n){e.exports={button:"Button_button__31esi","button-big":"Button_button-big__1_xip","button-small":"Button_button-small__2i9fi"}},,function(e,t,n){e.exports={addExpenseParagraph:"AddExpense_addExpenseParagraph__1qylo","expense-input":"AddExpense_expense-input__2lk30","cost-input":"AddExpense_cost-input__1nb9p",form__group:"AddExpense_form__group__1hjXK",form__field:"AddExpense_form__field__LvG-2",form__label:"AddExpense_form__label__2_32N",button:"AddExpense_button__3MSZw",checkboxes:"AddExpense_checkboxes__2wfwa"}},,function(e,t,n){e.exports={"add-person":"AddPerson_add-person__KylA2",input:"AddPerson_input__330tV",form__group:"AddPerson_form__group__-sG46",form__field:"AddPerson_form__field__3prXq",form__label:"AddPerson_form__label__8xxLr",button:"AddPerson_button__2y6Kk"}},,,function(e,t,n){e.exports={list:"MiniList_list__2I5-V","mini-list-paragraph":"MiniList_mini-list-paragraph__2kyZ1","paid-by":"MiniList_paid-by__2FVux"}},,,function(e,t,n){e.exports={grid:"Expenses_grid__satLL","users-list":"Expenses_users-list__30YUE","expenses-list":"Expenses_expenses-list__2rq09"}},function(e,t,n){e.exports={backdrop:"Modal_backdrop__2znzX",modal:"Modal_modal__2QgxK","slide-down":"Modal_slide-down__Y0TjC"}},function(e,t,n){e.exports={"summary-overview":"CreateSummary_summary-overview__31HaD","expenses-summary":"CreateSummary_expenses-summary__2HSyl",owe:"CreateSummary_owe__wvc6A",owes:"CreateSummary_owes__1JZEp"}},function(e,t,n){e.exports={box:"Checkbox_box__x8uoh",check:"Checkbox_check__24JEL"}},,function(e,t,n){e.exports={header:"Header_header__2-M0K","header-image":"Header_header-image__2GaMw"}},function(e,t,n){e.exports={item:"ListItem_item__2v6_O",button:"ListItem_button__1lyGi"}},function(e,t,n){e.exports={list:"ButtonList_list__2DZwz"}},function(e,t,n){e.exports={select:"SelectInput_select__1CuJT"}},,,,,function(e,t,n){},function(e,t,n){},,,,,,function(e,t,n){"use strict";n.r(t);var s=n(1),c=n.n(s),a=n(8),r=n.n(a),i=(n(26),n(27),n.p+"static/media/sharon-mccutcheon-8lnbXtxFGZw-unsplash.f883d6fb.jpg"),o=n(18),l=n.n(o),d=n(0),u=function(e){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("header",{className:l.a.header,children:Object(d.jsx)("h1",{children:e.title})}),Object(d.jsx)("div",{className:l.a["header-image"],children:Object(d.jsx)("img",{src:i,alt:"Controlling money flow!"})})]})},j=n(2),b=function(e){return Object(d.jsx)("button",{type:e.type||"button",className:e.class,onClick:e.onClick,children:e.children})},p=n(3),x=n.n(p),h=n(19),m=n.n(h),O=function(e){return Object(d.jsxs)("div",{className:m.a.item,children:[Object(d.jsx)("div",{children:Object(d.jsxs)("li",{onClick:function(){return e.onShowUserSummary(e.id)},children:[e.label," ",e.itemCost,e.currency]})}),Object(d.jsx)(b,{type:"button",class:"".concat(m.a.button," ").concat(x.a.button," \n        ").concat(x.a["button-small"]),onClick:function(){return e.onButtonClick(e.id)},children:"X"})]})},_=n(6),f=n(4),v="ACTION_ADD_USER",y="ACTION_REMOVE_USER",C="ACTION_ADD_EXPENSE",g="ACTION_REMOVE_EXPENSE";function E(e,t){switch(t.type){case v:return Object(f.a)(Object(f.a)({},e),{},{usersList:[].concat(Object(_.a)(e.usersList),[t.payload])});case y:return Object(f.a)(Object(f.a)({},e),{},{usersList:e.usersList.filter((function(e){return e.id!==t.payload}))});case C:return Object(f.a)(Object(f.a)({},e),{},{expenses:[].concat(Object(_.a)(e.expenses),[t.payload])});case g:return Object(f.a)(Object(f.a)({},e),{},{expenses:e.expenses.filter((function(e){return e.id!==t.payload}))});default:return e}}var S=Object(s.createContext)();function N(){var e=Object(s.useContext)(S);if(void 0===e)throw new Error("useCardContext must be used within a CardContextProvider");return e}function w(e){var t=e.children,n=e.initialState,c=Object(s.useReducer)(E,Object(f.a)({usersList:[],expenses:[]},n)),a=Object(j.a)(c,2),r=a[0],i=a[1],o=Object(s.useCallback)((function(e){i({type:v,payload:e})}),[]),l=Object(s.useCallback)((function(e){i({type:y,payload:e})}),[]),u=Object(s.useCallback)((function(e){i({type:C,payload:e})}),[]),b=Object(s.useCallback)((function(e){i({type:g,payload:e})}),[]),p=Object(s.useMemo)((function(){return Object(f.a)(Object(f.a)({},r),{},{addUser:o,removeUser:l,addExpense:u,removeExpense:b})}),[r,o,l,u,b]);return Object(d.jsx)(S.Provider,{value:p,children:t})}var k=function(e,t){var n="Unknown";return e.forEach((function(e){e.id===t&&(n=e.name)})),n},A=n(10),L=n.n(A),P=function(e){var t,n,s=N().usersList,c=e.participants.map((function(c){return t=k(s,c),n=c===e.paidBy?"".concat(L.a["mini-list-paragraph"]," ").concat(L.a["paid-by"]):L.a["mini-list-paragraph"],Object(d.jsx)("p",{className:n,children:t},c.id)}));return Object(d.jsx)("div",{className:L.a.list,children:c})},B=function(e){var t=N(),n=t.expenses,s=t.removeExpense,a=function(e){s(e)},r=null===n||void 0===n?void 0:n.map((function(e,t){return Object(d.jsxs)(c.a.Fragment,{children:[Object(d.jsx)(O,{itemCost:e.cost,label:e.description,id:e.id,currency:"[$]",onButtonClick:a}),Object(d.jsx)(P,{participants:e.participants,paidBy:e.paidBy})]})}));return Object(d.jsxs)("div",{className:e.class,children:[Object(d.jsx)("h2",{children:" expenses list"}),Object(d.jsx)("ul",{children:r})]})},U=n(20),M=n.n(U),F=function(e){var t=[x.a.button,x.a["button-big"]].join(" ");return Object(d.jsxs)("div",{className:M.a.list,children:[Object(d.jsx)(b,{type:"button",class:t,onClick:e.handleShowAddUserCart,children:"Add person"}),Object(d.jsx)(b,{type:"button",class:t,onClick:e.handleShowAddExpenseCart,children:"Add expense"}),Object(d.jsx)(b,{type:"button",class:t,onClick:e.handleShowCreateSummaryCart,children:"Summary"})]})},T=function(e){var t=N(),n=t.usersList,s=t.removeUser,c=function(e){s(e)},a=null===n||void 0===n?void 0:n.map((function(t,n){return Object(d.jsx)(O,{label:t.name,id:t.id,onButtonClick:c,onShowUserSummary:e.onShowUserSummary},t.id)}));return Object(d.jsxs)("div",{className:e.class,children:[Object(d.jsx)("h2",{children:" Users list"}),Object(d.jsx)("ul",{children:a})]})},I=n(13),X=n.n(I),q=n(14),D=n.n(q),H=function(e){return Object(d.jsx)("div",{className:D.a.backdrop,onClick:e.onClose})},G=document.getElementById("overlay"),J=function(e){return Object(d.jsx)("div",{className:D.a.modal,children:Object(d.jsx)("div",{className:D.a.contents,children:e.children})})},K=function(e){return Object(d.jsxs)(d.Fragment,{children:[r.a.createPortal(Object(d.jsx)(H,{onClose:e.onClose}),G),r.a.createPortal(Object(d.jsx)(J,{children:e.children}),G)]})},R=n(15),V=n.n(R),Z=function(e){var t=N(),n=t.expenses,s=t.usersList,c=[];s.forEach((function(e,t){c[t]=n.filter((function(t){return t.participants.some((function(t){return e.id===t}))}))}));var a={};c.forEach((function(e,t){a[s[t].id]={},e.forEach((function(e){e.participants.forEach((function(n){var c=e.participants.length,r=parseFloat(e.cost)/c,i=0;a[s[t].id][n]&&(i=a[s[t].id][n].balance),s[t].id!==n&&(s[t].id===e.paidBy?a[s[t].id][n]={balance:parseFloat(i)+r}:n===e.paidBy&&(a[s[t].id][n]={balance:parseFloat(i)-r}))}))}))})),console.log(a);var r=s.map((function(e,t){var n=0;return c[t].forEach((function(t){e.id===t.paidBy?n+=t.cost*((t.participants.length-1)/t.participants.length):n-=t.cost/t.participants.length})),n})),i=function(e,t){return e>0?Object(d.jsxs)("p",{className:V.a.owes,children:["total"===t?" ":"Owes you "," $",Math.abs(e.toFixed(2))]}):Object(d.jsxs)("p",{className:V.a.owe,children:["total"===t?" ":"You owe "," $",Math.abs(e.toFixed(2))]})},o=function(){return Object.entries(a).map((function(e,t){var n,c=Object(j.a)(e,2),a=c[0],o=c[1],l=k(s,a),u=function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h2",{children:l}),Object(d.jsx)("p",{children:"Total balance: "}),i(r[t],"total")]})},b=null===(n=Object.entries(o))||void 0===n?void 0:n.map((function(e){var t=Object(j.a)(e,2),n=t[0],c=t[1].balance;if(0!==c&&Object.keys(o).length){var a=k(s,n);return Object(d.jsxs)("div",{children:[Object(d.jsxs)("p",{children:[a," "]}),i(c)]})}return null}));return Object(d.jsxs)("div",{children:[Object(d.jsx)(u,{}),b]},a)}))};return Object(d.jsx)(K,{onClose:e.onClose,children:Object(d.jsxs)("div",{className:V.a["summary-overview"],children:[Object(d.jsx)("h2",{children:"Expenses summary"}),Object(d.jsx)(o,{})]})})},$=n(7),z=n.n($),Y=n(12),Q=function(e){var t=Object(s.useState)(""),n=Object(j.a)(t,2),c=n[0],a=n[1],r=N().addUser;return Object(d.jsx)(K,{onClose:e.onClose,children:Object(d.jsxs)("div",{className:z.a["add-person"],children:[Object(d.jsx)("h2",{children:"Add Person to users list"}),Object(d.jsxs)("div",{className:z.a.input,children:[Object(d.jsx)("input",{type:"input",className:z.a.form__field,placeholder:"Name",name:"name",value:c,onChange:function(e){return a(e.currentTarget.value)},id:"name",required:!0}),Object(d.jsx)("label",{for:"name",className:z.a.form__label,children:"Name"})]}),Object(d.jsx)(b,{type:"button",class:"".concat(z.a.button," ").concat(x.a.button," ").concat(x.a["button-small"]),onClick:function(e){r({name:c,id:Object(Y.uuid)()})},children:"Add Person"})]})})},W=n(5),ee=n.n(W),te=n(16),ne=n.n(te),se=function(e){return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:ne.a.box,children:[Object(d.jsx)("input",{id:e.id,type:"checkbox",value:e.participants,onChange:function(t){return e.onChange(e.id,t.currentTarget.checked)}}),Object(d.jsx)("span",{className:ne.a.check}),Object(d.jsx)("label",{className:ne.a.xxx,for:e.id,children:e.name})]})})},ce=n(21),ae=n.n(ce),re=function(e){var t=e.usersList.map((function(e,t){return Object(d.jsx)("option",{value:e.id,children:e.name},e.id)}));return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("select",{className:ae.a.select,name:"Paid by",id:"Paid by select",onChange:e.onChange,children:t})})},ie=function(e){var t,n=Object(s.useState)(""),c=Object(j.a)(n,2),a=c[0],r=c[1],i=Object(s.useState)(""),o=Object(j.a)(i,2),l=o[0],u=o[1],p=Object(s.useState)(""),h=Object(j.a)(p,2),m=h[0],O=h[1],f=N(),v=f.usersList,y=f.addExpense,C=Object(s.useState)(null===(t=v[0])||void 0===t?void 0:t.id),g=Object(j.a)(C,2),E=g[0],S=g[1],w=Object(s.useState)(""),k=Object(j.a)(w,2),A=k[0],L=k[1],P=Object(Y.uuid)(),B=function(e,t){t?m.includes(e)||O([].concat(Object(_.a)(m),[e])):(L([].concat(Object(_.a)(A),[e])),e!==E&&m.includes(e)&&O(m.filter((function(t){return t!==e}))))},U=v.map((function(e){return Object(d.jsx)(se,{name:e.name,id:e.id,participants:m,onChange:B},e.id)}));return Object(d.jsxs)(K,{onClose:e.onClose,children:[Object(d.jsx)("h2",{children:"Add expense to expenses list"}),Object(d.jsxs)("div",{className:ee.a["expense-input"],children:[Object(d.jsx)("input",{type:"input",className:ee.a.form__field,placeholder:"expense",name:"expense",id:"expense",value:a,onChange:function(e){return r(e.currentTarget.value)},required:!0}),Object(d.jsx)("label",{for:"expense",className:ee.a.form__label,children:"Expense"})]}),Object(d.jsxs)("div",{className:ee.a["cost-input"],children:[Object(d.jsx)("input",{type:"input",className:ee.a.form__field,placeholder:"cost",name:"cost",id:"cost",value:l,onChange:function(e){return u(e.currentTarget.value)},required:!0}),Object(d.jsx)("label",{for:"cost",className:ee.a.form__label,children:"Cost"})]}),Object(d.jsxs)("div",{className:ee.a.checkboxes,children:[Object(d.jsx)("p",{className:ee.a.addExpenseParagraph,children:"Choose expense participants:"}),U]}),Object(d.jsx)("p",{className:ee.a.addExpenseParagraph,children:"Choose who paid for this expense:"}),Object(d.jsx)(re,{usersList:v,onChange:function(e){S(e.currentTarget.value),m.includes(e.currentTarget.value)||O([].concat(Object(_.a)(m),[e.currentTarget.value])),A.includes(E)&&e.currentTarget.value!==E&&O(m.filter((function(e){return e!==E})))}}),Object(d.jsx)(b,{type:"button",class:"".concat(ee.a.button," ").concat(x.a.button," ").concat(x.a["button-small"]),onClick:function(e){y({description:a,cost:l,participants:m,paidBy:E,id:P})},children:"Add Expense"})]})},oe=function(e){var t=N(),n=t.expenses,s=t.usersList,c=n.filter((function(t){return t.paidBy===e.userSummaryId})),a=n.filter((function(t){return t.participants.some((function(t){return e.userSummaryId===t}))})),r=null===c||void 0===c?void 0:c.map((function(e,t){return Object(d.jsxs)("p",{children:[e.description,": ",e.cost,"[$]"]},e.id)})),i=k(s,e.userSummaryId),o=null===a||void 0===a?void 0:a.map((function(e,t){var n=k(s,e.paidBy);return Object(d.jsxs)("div",{children:[Object(d.jsxs)("p",{children:[e.description,":",e.cost,"[$]"]}),Object(d.jsxs)("p",{children:[" Paid by : ",n]})]},e.id)})),l=o.length;return Object(d.jsxs)(K,{onClose:e.onHideUserSummary,children:[Object(d.jsxs)("h2",{children:[" ",i," paid for:"]}),Object(d.jsx)("div",{children:r}),Object(d.jsxs)("h2",{children:[" ",i," took a part in ",l," transactions:"]}),Object(d.jsx)("div",{children:o})]})},le=function(e){var t=Object(s.useState)(!1),n=Object(j.a)(t,2),c=n[0],a=n[1],r=Object(s.useState)(!1),i=Object(j.a)(r,2),o=i[0],l=i[1],u=Object(s.useState)(!1),b=Object(j.a)(u,2),p=b[0],x=b[1],h=Object(s.useState)(!1),m=Object(j.a)(h,2),O=m[0],_=m[1],f=Object(s.useState)(""),v=Object(j.a)(f,2),y=v[0],C=v[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(F,{handleShowAddUserCart:function(){a(!0)},handleShowAddExpenseCart:function(){l(!0)},handleShowCreateSummaryCart:function(){x(!0)}}),Object(d.jsxs)("div",{className:X.a.grid,children:[Object(d.jsx)(T,{class:X.a["users-list"],onShowUserSummary:function(e){C(e),_(!0)}}),Object(d.jsx)(B,{class:X.a["expenses-list"]})]}),c&&Object(d.jsx)(Q,{onClose:function(){a(!1)}}),o&&Object(d.jsx)(ie,{onClose:function(){l(!1)}}),p&&Object(d.jsx)(Z,{onClose:function(){x(!1)}}),O&&Object(d.jsx)(oe,{userSummaryId:y,onHideUserSummary:function(){_(!1)}})]})};var de=function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(u,{title:"Money splitter"}),Object(d.jsx)("main",{children:Object(d.jsx)(le,{})})]})};r.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(w,{children:Object(d.jsx)(de,{})})}),document.getElementById("root"))}],[[33,1,2]]]);
//# sourceMappingURL=main.69fee1c0.chunk.js.map